---
displayed_sidebar: jsClientSidebar
---

import ParameterTypes from "@site/src/components/ParameterTypes"

# ProductService

[internal](../../admin_discounts/modules/admin_discounts.internal.mdx).[internal](../modules/admin_discounts.internal.internal.mdx).ProductService

## Properties

<ParameterTypes parameters={[
  {
    "name": "__configModule__",
    "type": "Record<`string`, `unknown`\\>",
    "description": "",
    "optional": true,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "__container__",
    "type": "`any`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "__moduleDeclaration__",
    "type": "Record<`string`, `unknown`\\>",
    "description": "",
    "optional": true,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "eventBus_",
    "type": "[`EventBusService`](admin_discounts.internal.internal.EventBusService.mdx)",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "featureFlagRouter_",
    "type": "[`FlagRouter`](admin_discounts.internal.FlagRouter.mdx)",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "imageRepository_",
    "type": "`Repository`<[`Image`](admin_collections.internal.Image.mdx)\\> & { `insertBulk`: Method insertBulk ; `upsertImages`: Method upsertImages  }",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "manager_",
    "type": "`EntityManager`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "productCategoryRepository_",
    "type": "`TreeRepository`<[`ProductCategory`](admin_collections.internal.ProductCategory.mdx)\\> & { `addProducts`: Method addProducts ; `findOneWithDescendants`: Method findOneWithDescendants ; `getFreeTextSearchResultsAndCount`: Method getFreeTextSearchResultsAndCount ; `removeProducts`: Method removeProducts  }",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "productOptionRepository_",
    "type": "`Repository`<[`ProductOption`](admin_collections.internal.ProductOption.mdx)\\>",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "productRepository_",
    "type": "`Repository`<[`Product`](admin_collections.internal.Product.mdx)\\> & { `_applyCategoriesQuery`: Method \\_applyCategoriesQuery ; `_findWithRelations`: Method \\_findWithRelations ; `bulkAddToCollection`: Method bulkAddToCollection ; `bulkRemoveFromCollection`: Method bulkRemoveFromCollection ; `findOneWithRelations`: Method findOneWithRelations ; `findWithRelations`: Method findWithRelations ; `findWithRelationsAndCount`: Method findWithRelationsAndCount ; `getCategoryIdsFromInput`: Method getCategoryIdsFromInput ; `getCategoryIdsRecursively`: Method getCategoryIdsRecursively ; `getFreeTextSearchResultsAndCount`: Method getFreeTextSearchResultsAndCount ; `isProductInSalesChannels`: Method isProductInSalesChannels ; `queryProducts`: Method queryProducts ; `queryProductsWithIds`: Method queryProductsWithIds  }",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "productTagRepository_",
    "type": "`Repository`<[`ProductTag`](admin_collections.internal.ProductTag.mdx)\\> & { `findAndCountByDiscountConditionId`: Method findAndCountByDiscountConditionId ; `insertBulk`: Method insertBulk ; `listTagsByUsage`: Method listTagsByUsage ; `upsertTags`: Method upsertTags  }",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "productTypeRepository_",
    "type": "`Repository`<[`ProductType`](admin_collections.internal.ProductType.mdx)\\> & { `findAndCountByDiscountConditionId`: Method findAndCountByDiscountConditionId ; `upsertType`: Method upsertType  }",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "productVariantRepository_",
    "type": "`Repository`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\\>",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "productVariantService_",
    "type": "[`ProductVariantService`](admin_discounts.internal.internal.ProductVariantService.mdx)",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "searchService_",
    "type": "[`SearchService`](admin_discounts.internal.internal.SearchService.mdx)",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "transactionManager_",
    "type": "`undefined` \\| `EntityManager`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "Events",
    "type": "`object`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "Events.CREATED",
    "type": "`string`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "Events.DELETED",
    "type": "`string`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "Events.UPDATED",
    "type": "`string`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "IndexName",
    "type": "``\"products\"``",
    "description": "",
    "optional": false,
    "defaultValue": "`\"products\"`",
    "children": []
  }
]} />

## Accessors

### activeManager\_

• `Protected` `get` **activeManager_**(): `EntityManager`

#### Returns

`EntityManager`

<ParameterTypes parameters={[
  {
    "name": "EntityManager",
    "type": "`EntityManager`",
    "optional": false,
    "defaultValue": "",
    "description": "",
    "children": []
  }
]} />

#### Inherited from

TransactionBaseService.activeManager\_

## Methods

### addOption

▸ **addOption**(`productId`, `optionTitle`): `Promise`<[`Product`](admin_collections.internal.Product.mdx)\>

Adds an option to a product. Options can, for example, be "Size", "Color",
etc. Will update all the products variants with a dummy value for the newly
created option. The same option cannot be added more than once.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "productId",
    "type": "`string`",
    "description": "the product to apply the new option to",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "optionTitle",
    "type": "`string`",
    "description": "the display title of the option, e.g. \"Size\"",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`Product`](admin_collections.internal.Product.mdx)\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`Product`](admin_collections.internal.Product.mdx)\\>",
    "optional": false,
    "defaultValue": "",
    "description": "the result of the model update operation",
    "children": [
      {
        "name": "Product",
        "type": "[`Product`](admin_collections.internal.Product.mdx)",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### atomicPhase\_

▸ `Protected` **atomicPhase_**<`TResult`, `TError`\>(`work`, `isolationOrErrorHandler?`, `maybeErrorHandlerOrDontFail?`): `Promise`<`TResult`\>

Wraps some work within a transactional block. If the service already has
a transaction manager attached this will be reused, otherwise a new
transaction manager is created.

<ParameterTypes parameters={[
  {
    "name": "TResult",
    "type": "`object`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "TError",
    "type": "`object`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "work",
    "type": "(`transactionManager`: `EntityManager`) => `Promise`<`TResult`\\>",
    "description": "the transactional work to be done",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "isolationOrErrorHandler",
    "type": "`IsolationLevel` \\| (`error`: `TError`) => `Promise`<`void` \\| `TResult`\\>",
    "description": "the isolation level to be used for the work.",
    "optional": true,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "maybeErrorHandlerOrDontFail",
    "type": "(`error`: `TError`) => `Promise`<`void` \\| `TResult`\\>",
    "description": "Potential error handler",
    "optional": true,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<`TResult`\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<`TResult`\\>",
    "optional": false,
    "defaultValue": "",
    "description": "the result of the transactional work",
    "children": []
  }
]} />

#### Inherited from

[TransactionBaseService](admin_discounts.internal.internal.TransactionBaseService.mdx).[atomicPhase_](admin_discounts.internal.internal.TransactionBaseService.mdx#atomicphase_)

___

### count

▸ **count**(`selector?`): `Promise`<`number`\>

Return the total number of documents in database

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "selector",
    "type": "[`Selector`](../modules/admin_discounts.internal.internal.mdx#selector)<[`Product`](admin_collections.internal.Product.mdx)\\>",
    "description": "the selector to choose products by",
    "optional": true,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<`number`\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<`number`\\>",
    "optional": false,
    "defaultValue": "",
    "description": "the result of the count operation",
    "children": [
      {
        "name": "number",
        "type": "`number`",
        "optional": true,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### create

▸ **create**(`productObject`): `Promise`<[`Product`](admin_collections.internal.Product.mdx)\>

Creates a product.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "productObject",
    "type": "[`CreateProductInput`](../../admin_discounts/modules/admin_discounts.internal.mdx#createproductinput)",
    "description": "the product to create",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`Product`](admin_collections.internal.Product.mdx)\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`Product`](admin_collections.internal.Product.mdx)\\>",
    "optional": false,
    "defaultValue": "",
    "description": "resolves to the creation result.",
    "children": [
      {
        "name": "Product",
        "type": "[`Product`](admin_collections.internal.Product.mdx)",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### delete

▸ **delete**(`productId`): `Promise`<`void`\>

Deletes a product from a given product id. The product's associated
variants will also be deleted.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "productId",
    "type": "`string`",
    "description": "the id of the product to delete. Must be castable as an ObjectId",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<`void`\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<`void`\\>",
    "optional": false,
    "defaultValue": "",
    "description": "empty promise",
    "children": []
  }
]} />

___

### deleteOption

▸ **deleteOption**(`productId`, `optionId`): `Promise`<`void` \| [`Product`](admin_collections.internal.Product.mdx)\>

Delete an option from a product.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "productId",
    "type": "`string`",
    "description": "the product to delete an option from",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "optionId",
    "type": "`string`",
    "description": "the option to delete",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<`void` \| [`Product`](admin_collections.internal.Product.mdx)\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<`void` \\| [`Product`](admin_collections.internal.Product.mdx)\\>",
    "optional": false,
    "defaultValue": "",
    "description": "the updated product",
    "children": [
      {
        "name": "void \\| Product",
        "type": "`void` \\| [`Product`](admin_collections.internal.Product.mdx)",
        "optional": true,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### filterProductsBySalesChannel

▸ **filterProductsBySalesChannel**(`productIds`, `salesChannelId`, `config?`): `Promise`<[`Product`](admin_collections.internal.Product.mdx)[]\>

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "productIds",
    "type": "`string`[]",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "salesChannelId",
    "type": "`string`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "config",
    "type": "[`FindProductConfig`](../../admin_discounts/modules/admin_discounts.internal.mdx#findproductconfig)",
    "description": "",
    "optional": true,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`Product`](admin_collections.internal.Product.mdx)[]\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`Product`](admin_collections.internal.Product.mdx)[]\\>",
    "optional": false,
    "defaultValue": "",
    "description": "",
    "children": [
      {
        "name": "Product[]",
        "type": "[`Product`](admin_collections.internal.Product.mdx)[]",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": [
          {
            "name": "Product",
            "type": "[`Product`](admin_collections.internal.Product.mdx)",
            "optional": false,
            "defaultValue": "",
            "description": "",
            "children": []
          }
        ]
      }
    ]
  }
]} />

___

### isProductInSalesChannels

▸ **isProductInSalesChannels**(`id`, `salesChannelIds`): `Promise`<`boolean`\>

Check if the product is assigned to at least one of the provided sales channels.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "id",
    "type": "`string`",
    "description": "product id",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "salesChannelIds",
    "type": "`string`[]",
    "description": "an array of sales channel ids",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<`boolean`\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<`boolean`\\>",
    "optional": false,
    "defaultValue": "",
    "description": "",
    "children": [
      {
        "name": "boolean",
        "type": "`boolean`",
        "optional": true,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### list

▸ **list**(`selector`, `config?`): `Promise`<[`Product`](admin_collections.internal.Product.mdx)[]\>

Lists products based on the provided parameters.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "selector",
    "type": "[`ProductSelector`](../../admin_discounts/modules/admin_discounts.internal.mdx#productselector)",
    "description": "an object that defines rules to filter products by",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "config",
    "type": "[`FindProductConfig`](../../admin_discounts/modules/admin_discounts.internal.mdx#findproductconfig)",
    "description": "object that defines the scope for what should be returned",
    "optional": true,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`Product`](admin_collections.internal.Product.mdx)[]\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`Product`](admin_collections.internal.Product.mdx)[]\\>",
    "optional": false,
    "defaultValue": "",
    "description": "the result of the find operation",
    "children": [
      {
        "name": "Product[]",
        "type": "[`Product`](admin_collections.internal.Product.mdx)[]",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": [
          {
            "name": "Product",
            "type": "[`Product`](admin_collections.internal.Product.mdx)",
            "optional": false,
            "defaultValue": "",
            "description": "",
            "children": []
          }
        ]
      }
    ]
  }
]} />

___

### listAndCount

▸ **listAndCount**(`selector`, `config?`): `Promise`<[[`Product`](admin_collections.internal.Product.mdx)[], `number`]\>

Lists products based on the provided parameters and includes the count of
products that match the query.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "selector",
    "type": "[`ProductSelector`](../../admin_discounts/modules/admin_discounts.internal.mdx#productselector)",
    "description": "an object that defines rules to filter products by",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "config",
    "type": "[`FindProductConfig`](../../admin_discounts/modules/admin_discounts.internal.mdx#findproductconfig)",
    "description": "object that defines the scope for what should be returned",
    "optional": true,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[[`Product`](admin_collections.internal.Product.mdx)[], `number`]\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[[`Product`](admin_collections.internal.Product.mdx)[], `number`]\\>",
    "optional": false,
    "defaultValue": "",
    "description": "an array containing the products as\n  the first element and the total count of products that matches the query\n  as the second element.",
    "children": [
      {
        "name": "Product[]",
        "type": "[`Product`](admin_collections.internal.Product.mdx)[]",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": []
      },
      {
        "name": "number",
        "type": "`number`",
        "optional": true,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### listTagsByUsage

▸ **listTagsByUsage**(`take?`): `Promise`<[`ProductTag`](admin_collections.internal.ProductTag.mdx)[]\>

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "take",
    "type": "`number`",
    "description": "",
    "optional": true,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`ProductTag`](admin_collections.internal.ProductTag.mdx)[]\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`ProductTag`](admin_collections.internal.ProductTag.mdx)[]\\>",
    "optional": false,
    "defaultValue": "",
    "description": "",
    "children": [
      {
        "name": "ProductTag[]",
        "type": "[`ProductTag`](admin_collections.internal.ProductTag.mdx)[]",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": [
          {
            "name": "ProductTag",
            "type": "[`ProductTag`](admin_collections.internal.ProductTag.mdx)",
            "optional": false,
            "defaultValue": "",
            "description": "",
            "children": []
          }
        ]
      }
    ]
  }
]} />

___

### listTypes

▸ **listTypes**(): `Promise`<[`ProductType`](admin_collections.internal.ProductType.mdx)[]\>

#### Returns

`Promise`<[`ProductType`](admin_collections.internal.ProductType.mdx)[]\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`ProductType`](admin_collections.internal.ProductType.mdx)[]\\>",
    "optional": false,
    "defaultValue": "",
    "description": "",
    "children": [
      {
        "name": "ProductType[]",
        "type": "[`ProductType`](admin_collections.internal.ProductType.mdx)[]",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": [
          {
            "name": "ProductType",
            "type": "[`ProductType`](admin_collections.internal.ProductType.mdx)",
            "optional": false,
            "defaultValue": "",
            "description": "",
            "children": []
          }
        ]
      }
    ]
  }
]} />

___

### prepareListQuery\_

▸ `Protected` **prepareListQuery_**(`selector`, `config`): { `q`: `string` ; `query`: [`FindWithoutRelationsOptions`](../../admin_discounts/modules/admin_discounts.internal.mdx#findwithoutrelationsoptions-1) ; `relations`: keyof [`Product`](admin_collections.internal.Product.mdx)[]  }

Temporary method to be used in place we need custom query strategy to prevent typeorm bug

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "selector",
    "type": "[`FilterableProductProps`](admin_discounts.internal.FilterableProductProps.mdx) \\| [`Selector`](../modules/admin_discounts.internal.internal.mdx#selector)<[`Product`](admin_collections.internal.Product.mdx)\\>",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "config",
    "type": "[`FindProductConfig`](../../admin_discounts/modules/admin_discounts.internal.mdx#findproductconfig)",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`object`

<ParameterTypes parameters={[
  {
    "name": "`object`",
    "type": "`object`",
    "optional": true,
    "defaultValue": "",
    "description": "",
    "children": []
  }
]} />

<ParameterTypes parameters={[
  {
    "name": "q",
    "type": "`string`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "query",
    "type": "[`FindWithoutRelationsOptions`](../../admin_discounts/modules/admin_discounts.internal.mdx#findwithoutrelationsoptions-1)",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "relations",
    "type": "keyof [`Product`](admin_collections.internal.Product.mdx)[]",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

___

### reorderVariants

▸ **reorderVariants**(`productId`, `variantOrder`): `Promise`<[`Product`](admin_collections.internal.Product.mdx)\>

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "productId",
    "type": "`string`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "variantOrder",
    "type": "`string`[]",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`Product`](admin_collections.internal.Product.mdx)\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`Product`](admin_collections.internal.Product.mdx)\\>",
    "optional": false,
    "defaultValue": "",
    "description": "",
    "children": [
      {
        "name": "Product",
        "type": "[`Product`](admin_collections.internal.Product.mdx)",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### retrieve

▸ **retrieve**(`productId`, `config?`): `Promise`<[`Product`](admin_collections.internal.Product.mdx)\>

Gets a product by id.
Throws in case of DB Error and if product was not found.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "productId",
    "type": "`string`",
    "description": "id of the product to get.",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "config",
    "type": "[`FindProductConfig`](../../admin_discounts/modules/admin_discounts.internal.mdx#findproductconfig)",
    "description": "object that defines what should be included in the query response",
    "optional": true,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`Product`](admin_collections.internal.Product.mdx)\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`Product`](admin_collections.internal.Product.mdx)\\>",
    "optional": false,
    "defaultValue": "",
    "description": "the result of the find one operation.",
    "children": [
      {
        "name": "Product",
        "type": "[`Product`](admin_collections.internal.Product.mdx)",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### retrieveByExternalId

▸ **retrieveByExternalId**(`externalId`, `config?`): `Promise`<[`Product`](admin_collections.internal.Product.mdx)\>

Gets a product by external id.
Throws in case of DB Error and if product was not found.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "externalId",
    "type": "`string`",
    "description": "handle of the product to get.",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "config",
    "type": "[`FindProductConfig`](../../admin_discounts/modules/admin_discounts.internal.mdx#findproductconfig)",
    "description": "details about what to get from the product",
    "optional": true,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`Product`](admin_collections.internal.Product.mdx)\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`Product`](admin_collections.internal.Product.mdx)\\>",
    "optional": false,
    "defaultValue": "",
    "description": "the result of the find one operation.",
    "children": [
      {
        "name": "Product",
        "type": "[`Product`](admin_collections.internal.Product.mdx)",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### retrieveByHandle

▸ **retrieveByHandle**(`productHandle`, `config?`): `Promise`<[`Product`](admin_collections.internal.Product.mdx)\>

Gets a product by handle.
Throws in case of DB Error and if product was not found.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "productHandle",
    "type": "`string`",
    "description": "handle of the product to get.",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "config",
    "type": "[`FindProductConfig`](../../admin_discounts/modules/admin_discounts.internal.mdx#findproductconfig)",
    "description": "details about what to get from the product",
    "optional": true,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`Product`](admin_collections.internal.Product.mdx)\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`Product`](admin_collections.internal.Product.mdx)\\>",
    "optional": false,
    "defaultValue": "",
    "description": "the result of the find one operation.",
    "children": [
      {
        "name": "Product",
        "type": "[`Product`](admin_collections.internal.Product.mdx)",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### retrieveOptionByTitle

▸ **retrieveOptionByTitle**(`title`, `productId`): `Promise`<``null`` \| [`ProductOption`](admin_collections.internal.ProductOption.mdx)\>

Retrieve product's option by title.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "title",
    "type": "`string`",
    "description": "title of the option",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "productId",
    "type": "`string`",
    "description": "id of a product",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<``null`` \| [`ProductOption`](admin_collections.internal.ProductOption.mdx)\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<``null`` \\| [`ProductOption`](admin_collections.internal.ProductOption.mdx)\\>",
    "optional": false,
    "defaultValue": "",
    "description": "product option",
    "children": [
      {
        "name": "``null`` \\| ProductOption",
        "type": "``null`` \\| [`ProductOption`](admin_collections.internal.ProductOption.mdx)",
        "optional": true,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### retrieveVariants

▸ **retrieveVariants**(`productId`, `config?`): `Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)[]\>

Gets all variants belonging to a product.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "productId",
    "type": "`string`",
    "description": "the id of the product to get variants from.",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "config",
    "type": "[`FindProductConfig`](../../admin_discounts/modules/admin_discounts.internal.mdx#findproductconfig)",
    "description": "The config to select and configure relations etc...",
    "optional": true,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)[]\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)[]\\>",
    "optional": false,
    "defaultValue": "",
    "description": "an array of variants",
    "children": [
      {
        "name": "ProductVariant[]",
        "type": "[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)[]",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": [
          {
            "name": "ProductVariant",
            "type": "[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)",
            "optional": false,
            "defaultValue": "",
            "description": "",
            "children": []
          }
        ]
      }
    ]
  }
]} />

___

### retrieve\_

▸ **retrieve_**(`selector`, `config?`): `Promise`<[`Product`](admin_collections.internal.Product.mdx)\>

Gets a product by selector.
Throws in case of DB Error and if product was not found.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "selector",
    "type": "[`Selector`](../modules/admin_discounts.internal.internal.mdx#selector)<[`Product`](admin_collections.internal.Product.mdx)\\>",
    "description": "selector object",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "config",
    "type": "[`FindProductConfig`](../../admin_discounts/modules/admin_discounts.internal.mdx#findproductconfig)",
    "description": "object that defines what should be included in the query response",
    "optional": true,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`Product`](admin_collections.internal.Product.mdx)\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`Product`](admin_collections.internal.Product.mdx)\\>",
    "optional": false,
    "defaultValue": "",
    "description": "the result of the find one operation.",
    "children": [
      {
        "name": "Product",
        "type": "[`Product`](admin_collections.internal.Product.mdx)",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### shouldRetryTransaction\_

▸ `Protected` **shouldRetryTransaction_**(`err`): `boolean`

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "err",
    "type": "Record<`string`, `unknown`\\> \\| { `code`: `string`  }",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`boolean`

<ParameterTypes parameters={[
  {
    "name": "boolean",
    "type": "`boolean`",
    "optional": true,
    "defaultValue": "",
    "description": "",
    "children": []
  }
]} />

#### Inherited from

[TransactionBaseService](admin_discounts.internal.internal.TransactionBaseService.mdx).[shouldRetryTransaction_](admin_discounts.internal.internal.TransactionBaseService.mdx#shouldretrytransaction_)

___

### update

▸ **update**(`productId`, `update`): `Promise`<[`Product`](admin_collections.internal.Product.mdx)\>

Updates a product. Product variant updates should use dedicated methods,
e.g. `addVariant`, etc. The function will throw errors if metadata or
product variant updates are attempted.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "productId",
    "type": "`string`",
    "description": "the id of the product. Must be a string that can be casted to an ObjectId",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "update",
    "type": "[`UpdateProductInput`](../../admin_discounts/modules/admin_discounts.internal.mdx#updateproductinput)",
    "description": "an object with the update values.",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`Product`](admin_collections.internal.Product.mdx)\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`Product`](admin_collections.internal.Product.mdx)\\>",
    "optional": false,
    "defaultValue": "",
    "description": "resolves to the update result.",
    "children": [
      {
        "name": "Product",
        "type": "[`Product`](admin_collections.internal.Product.mdx)",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### updateOption

▸ **updateOption**(`productId`, `optionId`, `data`): `Promise`<[`Product`](admin_collections.internal.Product.mdx)\>

Updates a product's option. Throws if the call tries to update an option
not associated with the product. Throws if the updated title already exists.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "productId",
    "type": "`string`",
    "description": "the product whose option we are updating",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "optionId",
    "type": "`string`",
    "description": "the id of the option we are updating",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "data",
    "type": "[`ProductOptionInput`](../../admin_discounts/modules/admin_discounts.internal.mdx#productoptioninput)",
    "description": "the data to update the option with",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`Product`](admin_collections.internal.Product.mdx)\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`Product`](admin_collections.internal.Product.mdx)\\>",
    "optional": false,
    "defaultValue": "",
    "description": "the updated product",
    "children": [
      {
        "name": "Product",
        "type": "[`Product`](admin_collections.internal.Product.mdx)",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### updateShippingProfile

▸ **updateShippingProfile**(`productIds`, `profileId`): `Promise`<[`Product`](admin_collections.internal.Product.mdx)[]\>

Assign a product to a profile, if a profile id null is provided then detach the product from the profile

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "productIds",
    "type": "`string` \\| `string`[]",
    "description": "ID or IDs of the products to update",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "profileId",
    "type": "``null`` \\| `string`",
    "description": "Shipping profile ID to update the shipping options with",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`Product`](admin_collections.internal.Product.mdx)[]\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`Product`](admin_collections.internal.Product.mdx)[]\\>",
    "optional": false,
    "defaultValue": "",
    "description": "updated products",
    "children": [
      {
        "name": "Product[]",
        "type": "[`Product`](admin_collections.internal.Product.mdx)[]",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": [
          {
            "name": "Product",
            "type": "[`Product`](admin_collections.internal.Product.mdx)",
            "optional": false,
            "defaultValue": "",
            "description": "",
            "children": []
          }
        ]
      }
    ]
  }
]} />

___

### withTransaction

▸ **withTransaction**(`transactionManager?`): [`ProductService`](admin_discounts.internal.internal.ProductService.mdx)

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "transactionManager",
    "type": "`EntityManager`",
    "description": "",
    "optional": true,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

[`ProductService`](admin_discounts.internal.internal.ProductService.mdx)

<ParameterTypes parameters={[
  {
    "name": "ProductService",
    "type": "[`ProductService`](admin_discounts.internal.internal.ProductService.mdx)",
    "optional": false,
    "defaultValue": "",
    "description": "",
    "children": []
  }
]} />

#### Inherited from

[TransactionBaseService](admin_discounts.internal.internal.TransactionBaseService.mdx).[withTransaction](admin_discounts.internal.internal.TransactionBaseService.mdx#withtransaction)
